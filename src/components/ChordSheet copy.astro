---
import ChordSheetJS from "chordsheetjs";

const chordSheet = `
{title: Let it be}
{subtitle: ChordSheetJS example version}

{start_of_chorus: Chorus}
Let it [Am]be, let it [C/G]be, let it [F]be, let it [C]be
[C]Whisper words of [G]wisdom, let it [F]be [C/E] [Dm] [C]
{end_of_chorus}`.substring(1);

const parser = new ChordSheetJS.ChordProParser();
const song = parser.parse(chordSheet);

const formatter = new ChordSheetJS.HtmlTableFormatter();
const disp = formatter.format(song);
---

<div class="chord-sheet-container">
  <h2>HTML Output</h2>
  <div set:html={disp} class="chord-sheet" />

  <h2>ChordPro Output</h2>
  <pre>{disp}</pre>
</div>

<div class="chord-sheet-container">
  <h2 class="song-title">Let It Be</h2>
  <div class="artist">The Beatles</div>

  <div class="chord-sheet-wrapper">
    <div set:html={disp} class="chord-sheet" />
  </div>
</div>

<style>
  /* Import beautiful fonts */
  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Source+Code+Pro:wght@400;500&display=swap");

  .chord-sheet-container {
    max-width: 680px;
    margin: 0 auto;
    padding: 2rem;
    color: #2d3748;
  }

  .song-title {
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    color: #1a365d;
    margin-bottom: 0.5rem;
    letter-spacing: -0.025em;
  }

  .artist {
    text-align: center;
    font-size: 1.25rem;
    color: #718096;
    margin-bottom: 3rem;
    font-weight: 400;
  }

  .chord-sheet-wrapper {
    background: white;
    border-radius: 12px;
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
    padding: 2.5rem;
    line-height: 1.6;
  }

  /* ChordSheetJS HTML Div Formatter classes */
  .chord-sheet {
    font-size: 1.15rem;
    white-space: pre-wrap;
    font-family: "Ubuntu Mono", monospace;
    font-weight: 700;
    font-style: normal;
  }

  .paragraph {
    margin-bottom: 2.5rem;
  }

  .row {
    position: relative;
    margin-bottom: 0.5rem;
  }

  .chord {
    position: absolute;
    top: -1.2em;
    left: 0;
    font-family: "Source Code Pro", monospace;
    font-weight: 500;
    font-size: 0.85rem;
    color: #5a67d8;
    padding: 0 2px;
  }

  .lyrics {
    white-space: pre;
    font-weight: 400;
  }

  /* Section styling */
  .chorus,
  .verse,
  .bridge {
    padding-left: 1.5rem;
    border-left: 3px solid;
    margin-left: -1.5rem;
  }

  .chorus {
    border-color: #9f7aea;
    background-color: #faf5ff;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
  }

  .chorus::before {
    content: "Chorus";
    display: block;
    font-weight: 600;
    color: #6b46c1;
    margin-bottom: 0.75rem;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .verse {
    border-color: #4299e1;
    margin-bottom: 2rem;
  }

  .bridge {
    border-color: #f6ad55;
  }

  /* Chord highlighting on hover */
  .chord:hover {
    color: #44337a;
    background: #ebf4ff;
    border-radius: 4px;
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .chord-sheet-container {
      padding: 1rem;
    }

    .chord-sheet-wrapper {
      padding: 1.5rem;
    }

    .song-title {
      font-size: 2rem;
    }
  }
</style>
